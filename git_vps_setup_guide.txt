GUIDE TO CREATE A GIT MANAGEMENT ACCOUNT ON VPS
Synchronize code from GitHub to VPS using SSH Key

## CHECKING ACCOUNTS
1. List all accounts on the system:
cut -d: -f1 /etc/passwd
# Or
getent passwd | cut -d: -f1
# Both commands display all accounts, including created user accounts.

2. Filter users with SSH access:
awk -F: '/\/bin\/bash/ { print $1 }' /etc/passwd

3. Check Apache user:
ps aux | grep apache
# Or
ps aux | grep httpd

4. Check users with SSH Key:
for user in $(cut -d: -f1 /etc/passwd); do
    home=$(eval echo ~$user)
    if [ -f "$home/.ssh/authorized_keys" ]; then
        echo "$user has SSH key configured."
    fi
done

## SETUP STEPS
1. Create a new user for Git management:
sudo adduser n9u93n
# Leave password blank as SSH key will be used.

2. Create a common group for Apache and Git:
sudo groupadd vinanetwork

3. Add Apache and Git users to the group:
sudo usermod -aG vinanetwork www-data
sudo usermod -aG vinanetwork n9u93n

4. Assign web directory permissions to the group:
sudo chgrp -R vinanetwork /var/www/vinanetwork/public_html
sudo chmod -R 775 /var/www/vinanetwork/public_html
# Permission 775: group has read, write, execute (rwx-rwx-r--).

5. Set Sticky Group:
sudo find /var/www/vinanetwork/public_html -type d -exec chmod g+s {} \;
# Ensure new files/folders belong to the vinanetwork group.

6. Generate SSH Key for the new user:
su - n9u93n
ssh-keygen -t ed25519 -C "admin@vina.network"
# Press Enter to accept the default path ~/.ssh/id_ed25519.
# Display public key:
cat ~/.ssh/id_ed25519.pub

7. Add SSH Key to GitHub:
- Copy the public key.
- GitHub → Settings → SSH and GPG Keys → New SSH Key.
- Title: VPS Key (or custom name).
- Paste the public key.

8. Clone repository via SSH:
cd /var/www/vinanetwork/public_html
# If not cloned yet:
git clone git@github.com:VinaNetwork/Vina.Network.git .
# If previously cloned via HTTPS, switch to SSH:
git remote set-url origin git@github.com:VinaNetwork/Vina.Network.git

9. Set commit information:
cd /var/www/vinanetwork/public_html
git config user.name "Vina Network"
git config user.email "admin@vina.network"

10. Pull code from GitHub:
cd /var/www/vinanetwork/public_html
git pull origin main
