# Permissions and Ownership for Tools Directory Structure
# Generated by Grok for vinanetwork on 2025-06-18 11:39 +07
# Purpose: Define permissions and ownership for Tools functionality
# Web Server: Apache, running as www-data:www-data
# PHP: php-fpm, running as www-data:www-data
# Notes:
# - Directories: 755 (rwx for owner, rx for group/others) for executable dirs
# - PHP/CSS/JS files: 644 (rw for owner, r for group/others) for read-only
# - Log/Cache files: 664 (rw for owner/group, r for others) for www-data write access
# - Owner/Group: www-data:www-data for Apache/PHP access
# - Commands are provided for each directory/file to set permissions and ownership
# - Run commands as root (sudo) and verify after applying
# - Parent directories (/var/www, /var/www/vinanetwork, /var/www/vinanetwork/public_html)
#   should be 755 and owned by www-data:www-data
# - General apply commands (optional, for bulk changes):
#   sudo chown -R www-data:www-data /var/www/vinanetwork/public_html/tools
#   sudo chmod -R 755 /var/www/vinanetwork/public_html/tools
#   sudo find /var/www/vinanetwork/public_html/tools -type f -exec chmod 644 {} \;
#   sudo chmod 764 /var/www/vinanetwork/public_html/tools/logs
#   sudo find /var/www/vinanetwork/public_html/tools/logs -type f -exec chmod 664 {} \;
#   sudo chmod 764 /var/www/vinanetwork/public_html/tools/nft-holders/cache
#   sudo find /var/www/vinanetwork/public_html/tools/nft-holders/cache -type f -exec chmod 664 {} \;

[Directory Structure and Permissions]

/var/www/vinanetwork/public_html/tools/
- Permissions: drwxr-xr-x (755)
- Owner/Group: www-data:www-data
- Description: Root directory for Tools page, contains PHP, CSS, JS, and subdirs.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools
  sudo chmod 755 /var/www/vinanetwork/public_html/tools

├── index.php
- Permissions: -rw-r--r-- (644)
- Owner/Group: www-data:www-data
- Description: Main entry point for Tools page, read/executed by Apache.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/index.php
  sudo chmod 644 /var/www/vinanetwork/public_html/tools/index.php

├── tools-load.php
- Permissions: -rw-r--r-- (644)
- Owner/Group: www-data:www-data
- Description: PHP script for loading Tools functionality, read/executed by Apache.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/tools-load.php
  sudo chmod 644 /var/www/vinanetwork/public_html/tools/tools-load.php

├── tools-api.php
- Permissions: -rw-r--r-- (644)
- Owner/Group: www-data:www-data
- Description: API handler for Tools, read/executed by Apache.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/tools-api.php
  sudo chmod 644 /var/www/vinanetwork/public_html/tools/tools-api.php

├── bootstrap.php
- Permissions: -rw-r--r-- (644)
- Owner/Group: www-data:www-data
- Description: Bootstrap script for Tools, read/executed by Apache.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/bootstrap.php
  sudo chmod 644 /var/www/vinanetwork/public_html/tools/bootstrap.php

├── tools.css
- Permissions: -rw-r--r-- (644)
- Owner/Group: www-data:www-data
- Description: CSS stylesheet for Tools, served by Apache.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/tools.css
  sudo chmod 644 /var/www/vinanetwork/public_html/tools/tools.css

├── tools.js
- Permissions: -rw-r--r-- (644)
- Owner/Group: www-data:www-data
- Description: JavaScript for Tools, served by Apache.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/tools.js
  sudo chmod 644 /var/www/vinanetwork/public_html/tools/tools.js

├── nft-holders/
- Permissions: drwxr-xr-x (755)
- Owner/Group: www-data:www-data
- Description: Directory for NFT Holders functionality, contains PHP scripts and cache.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/nft-holders
  sudo chmod 755 /var/www/vinanetwork/public_html/tools/nft-holders

│   ├── nft-holders.php
- Permissions: -rw-r--r-- (644)
- Owner/Group: www-data:www-data
- Description: Main script for NFT Holders, processes collection addresses, logs, caches.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/nft-holders/nft-holders.php
  sudo chmod 644 /var/www/vinanetwork/public_html/tools/nft-holders/nft-holders.php

│   ├── nft-holders-export.php
- Permissions: -rw-r--r-- (644)
- Owner/Group: www-data:www-data
- Description: Script for exporting NFT Holders data, read/executed by Apache.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/nft-holders/nft-holders-export.php
  sudo chmod 644 /var/www/vinanetwork/public_html/tools/nft-holders/nft-holders-export.php

│   ├── cache/
- Permissions: drwxrw-r-- (764)
- Owner/Group: www-data:www-data
- Description: Directory for NFT Holders cache files, writable by www-data for PHP caching.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/nft-holders/cache
  sudo chmod 764 /var/www/vinanetwork/public_html/tools/nft-holders/cache

│   │   └── nft_holders_cache.json
- Permissions: -rw-rw-r-- (664)
- Owner/Group: www-data:www-data
- Description: Cache file for NFT Holders data, written by PHP.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/nft-holders/cache/nft_holders_cache.json
  sudo chmod 664 /var/www/vinanetwork/public_html/tools/nft-holders/cache/nft_holders_cache.json

├── logs/
- Permissions: drwxrw-r-- (764)
- Owner/Group: www-data:www-data
- Description: Directory for log files, writable by www-data for PHP logging.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/logs
  sudo chmod 764 /var/www/vinanetwork/public_html/tools/logs

│   ├── api_log.txt
- Permissions: -rw-rw-r-- (664)
- Owner/Group: www-data:www-data
- Description: Logs API requests/responses, written by PHP.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/logs/api_log.txt
  sudo chmod 664 /var/www/vinanetwork/public_html/tools/logs/api_log.txt

│   ├── client_log.txt
- Permissions: -rw-rw-r-- (664)
- Owner/Group: www-data:www-data
- Description: Logs client-side interactions, written by PHP.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/logs/client_log.txt
  sudo chmod 664 /var/www/vinanetwork/public_html/tools/logs/client_log.txt

│   ├── load_tool_log.txt
- Permissions: -rw-rw-r-- (664)
- Owner/Group: www-data:www-data
- Description: Logs tool loading events, written by PHP.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/logs/load_tool_log.txt
  sudo chmod 664 /var/www/vinanetwork/public_html/tools/logs/load_tool_log.txt

│   ├── nft_holders_log.txt
- Permissions: -rw-rw-r-- (664)
- Owner/Group: www-data:www-data
- Description: Logs NFT Holders processing (mintAddress, cache, API), written by PHP.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/logs/nft_holders_log.txt
  sudo chmod 664 /var/www/vinanetwork/public_html/tools/logs/nft_holders_log.txt

│   ├── php_errors.txt
- Permissions: -rw-rw-r-- (664)
- Owner/Group: www-data:www-data
- Description: Logs PHP errors, written by PHP.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/logs/php_errors.txt
  sudo chmod 664 /var/www/vinanetwork/public_html/tools/logs/php_errors.txt

│   └── tools_log.txt
- Permissions: -rw-rw-r-- (664)
- Owner/Group: www-data:www-data
- Description: General logs for Tools functionality, written by PHP.
- Commands:
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/logs/tools_log.txt
  sudo chmod 664 /var/www/vinanetwork/public_html/tools/logs/tools_log.txt

[Commands to Verify Permissions]
# Run these to check current permissions:
ls -ld /var/www/vinanetwork/public_html/tools/
ls -l /var/www/vinanetwork/public_html/tools/
ls -ld /var/www/vinanetwork/public_html/tools/{nft-holders,logs}/
ls -l /var/www/vinanetwork/public_html/tools/nft-holders/
ls -l /var/www/vinanetwork/public_html/tools/nft-holders/cache/
ls -l /var/www/vinanetwork/public_html/tools/logs/

[Notes]
- Ensure Apache/PHP run as www-data (check with `ps aux | grep apache2` and `ps aux | grep php`).
- If permissions issues persist, check parent dirs (/var/www, /var/www/vinanetwork, /var/www/vinanetwork/public_html) for 755 and www-data:www-data.
- Log and cache files need 664 to allow PHP (www-data) write access while readable by others.
- No executable permissions (x) needed for PHP/CSS/JS/log/cache files, only for directories.
- Apply changes carefully to avoid downtime; test after applying (e.g., https://vina.network/tools/check-nft-holders).
- If /nft-holders/cache/ or nft_holders_cache.json does not exist, create them:
  sudo mkdir -p /var/www/vinanetwork/public_html/tools/nft-holders/cache
  sudo touch /var/www/vinanetwork/public_html/tools/nft-holders/cache/nft_holders_cache.json
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/nft-holders/cache
  sudo chmod 764 /var/www/vinanetwork/public_html/tools/nft-holders/cache
  sudo chown www-data:www-data /var/www/vinanetwork/public_html/tools/nft-holders/cache/nft_holders_cache.json
  sudo chmod 664 /var/www/vinanetwork/public_html/tools/nft-holders/cache/nft_holders_cache.json
